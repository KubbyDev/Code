<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Learning Cars</title>
    <style>
        * { padding: 0; margin: 0; }
        canvas { background: #7b7b7b; display: block; margin: 0 auto; }
    </style>
</head>
<body>

<canvas id="myCanvas" width="1400" height="700"></canvas>

<script src="Game/Vector.js"></script>
<script src="Game/Line.js"></script>
<script src="Game/Checkpoint.js"></script>
<script src="Game/Circuit.js"></script>
<script src="Game/Car.js"></script>
<script src="Game/Game.js"></script>
<script src="Game/HumanController.js"></script>

<script src="Network/Input.js"></script>
<script src="Network/Connection.js"></script>
<script src="Network/Neuron.js"></script>
<script src="Network/Network.js"></script>
<script src="Network/NetworkSave.js"></script>
<script src="Network/Drawer.js"></script>
<script src="Game/NetworkController.js"></script>

<script src="GeneticAlgorithm/Agent.js"></script>
<script src="GeneticAlgorithm/Algorithm.js"></script>

<script>

    const canvas = document.getElementById("myCanvas");
    const ctx = canvas.getContext("2d");

    const training = true;

    if(training)
        GeneticAlgorithm.launch();
    else
        humanGame();

    function humanGame() {

        let game = new Game();
        game.cars.push(new Car(true));
        game.cars.push(new Car(false));
        game.cars[1].controller.network = NetworkSave.parse(
            "9\n" +
            "\n" +
            "\n" +
            "-1.0571101828663025\n" +
            "0 0 -0.5245843654878459\n" +
            "0 1 -0.9097922896844999\n" +
            "0 2 0.5406931716294839\n" +
            "0 3 -0.5717863909171047\n" +
            "0 4 -0.6356941825008521\n" +
            "0 5 -0.5877028531517527\n" +
            "0 6 -0.26451344081875866\n" +
            "0 7 0.27487868374324437\n" +
            "0 8 -0.3029823216633157\n" +
            "\n" +
            "-0.31556077560984214\n" +
            "0 0 0.3389325887300123\n" +
            "0 1 1.3802714795094728\n" +
            "0 2 0.014978074234868993\n" +
            "0 3 0.4290390116694032\n" +
            "0 4 0.7970424449535065\n" +
            "0 5 0.416637553008739\n" +
            "0 6 -1.0162161209928269\n" +
            "0 7 0.9608396821780141\n" +
            "0 8 0.8760609120684976\n" +
            "\n" +
            "-0.9607759746918837\n" +
            "0 0 0.5516395694868304\n" +
            "0 1 -0.9324761144273258\n" +
            "0 2 -1.152729561493449\n" +
            "0 3 -0.036983214297107214\n" +
            "0 4 0.7543773441637293\n" +
            "0 5 0.3850538818464658\n" +
            "0 6 0.10868460926064073\n" +
            "0 7 -0.8279414100966122\n" +
            "0 8 -1.1172100299994803\n" +
            "\n" +
            "0.07831501727495714\n" +
            "0 0 0.30309597918930475\n" +
            "0 1 0.6356707602749784\n" +
            "0 2 -0.026014390245484343\n" +
            "0 3 -0.14031130110761758\n" +
            "0 4 -0.9101244144216402\n" +
            "0 5 -0.4626487976157617\n" +
            "0 6 -0.0923144502316098\n" +
            "0 7 0.710865933023567\n" +
            "0 8 0.14637616786169078\n" +
            "\n" +
            "-0.11883351385598004\n" +
            "0 0 0.6905415084974049\n" +
            "0 1 0.2837324192409188\n" +
            "0 2 0.1713802721598297\n" +
            "0 3 0.4482568570409923\n" +
            "0 4 0.03958699161522816\n" +
            "0 5 -0.8636434125121435\n" +
            "0 6 -0.00447416378664417\n" +
            "0 7 -0.5473095905736323\n" +
            "0 8 -0.12733588310473754\n" +
            "\n" +
            "-0.42512583783771535\n" +
            "0 0 0.6155916468790601\n" +
            "0 1 -0.6137945681691639\n" +
            "0 2 0.9586718221957572\n" +
            "0 3 -0.9872714889878421\n" +
            "0 4 0.9103016212781194\n" +
            "0 5 -0.597616180725705\n" +
            "0 6 0.07273912857149048\n" +
            "0 7 0.19672863673667745\n" +
            "0 8 -0.1669725732327545\n" +
            "\n" +
            "0.44433850149149234\n" +
            "0 0 0.44535459227992313\n" +
            "0 1 -0.5020751927039585\n" +
            "0 2 0.3382360009735393\n" +
            "0 3 -1.0940038153312117\n" +
            "0 4 -0.1057352450058649\n" +
            "0 5 0.696963923619286\n" +
            "0 6 0.7300706635575145\n" +
            "0 7 -0.1804446850673319\n" +
            "0 8 -0.7146293138398687\n" +
            "\n" +
            "-0.7200797258776173\n" +
            "0 0 -0.9055017471359558\n" +
            "0 1 -0.9612043654264996\n" +
            "0 2 -0.9929234682034213\n" +
            "0 3 0.08532599446271472\n" +
            "0 4 0.5573600665578018\n" +
            "0 5 -0.19212719758736907\n" +
            "0 6 -1.3997387820452962\n" +
            "0 7 0.45138432973577236\n" +
            "0 8 -0.5554705825015311\n" +
            "\n" +
            "-0.7881479124358165\n" +
            "0 0 -0.8526385793224013\n" +
            "0 1 0.884934387041378\n" +
            "0 2 -0.22372861473652575\n" +
            "0 3 0.07420105086818465\n" +
            "0 4 0.5557548957602958\n" +
            "0 5 0.2686520855045469\n" +
            "0 6 -0.8611626333340786\n" +
            "0 7 -1.155042625556037\n" +
            "0 8 -0.6177185577003274\n" +
            "\n" +
            "0.1088289726142678\n" +
            "0 0 0.6930732574695377\n" +
            "0 1 0.6003803503869359\n" +
            "0 2 -0.3801872583035151\n" +
            "0 3 0.8645522751044685\n" +
            "0 4 0.3996368180904671\n" +
            "0 5 0.029374474858852362\n" +
            "0 6 0.7951059682884898\n" +
            "0 7 -0.054682453482321765\n" +
            "0 8 0.21009284063655917\n" +
            "\n" +
            "\n" +
            "-0.277281055048586\n" +
            "1 0 -0.11189859094959234\n" +
            "1 1 -0.46012320011119595\n" +
            "1 2 0.3547589363262647\n" +
            "1 3 0.08667761430357195\n" +
            "1 4 -1.1020992531981129\n" +
            "1 5 0.9666717297457814\n" +
            "1 6 0.7552468265859954\n" +
            "1 7 -0.5677428965445656\n" +
            "1 8 0.7901212005636187\n" +
            "1 9 -0.6235469810235476\n" +
            "\n" +
            "-0.6131638663810701\n" +
            "1 0 -0.34292504793545164\n" +
            "1 1 -1.1350965912192454\n" +
            "1 2 0.9774687994082695\n" +
            "1 3 -1.0779215957767578\n" +
            "1 4 0.2942053015095309\n" +
            "1 5 -0.5397295445484467\n" +
            "1 6 0.6972262413379523\n" +
            "1 7 -0.42810983379487694\n" +
            "1 8 -0.7653341818817798\n" +
            "1 9 0.06435683956392833\n" +
            "\n" +
            "-0.2089003987962486\n" +
            "1 0 -0.6103074773886081\n" +
            "1 1 0.5191216193915191\n" +
            "1 2 -0.7092424112007965\n" +
            "1 3 0.9513277930633509\n" +
            "1 4 -0.7678995880508868\n" +
            "1 5 0.6092854190618234\n" +
            "1 6 0.9580716871679462\n" +
            "1 7 -0.25398905931405613\n" +
            "1 8 -0.21239315202436904\n" +
            "1 9 -0.6324271885453414\n" +
            "\n" +
            "-0.17043116934619684\n" +
            "1 0 0.7724640047842177\n" +
            "1 1 -0.6260614196362021\n" +
            "1 2 0.44856802109580735\n" +
            "1 3 0.8271259273059315\n" +
            "1 4 -0.16429779931837304\n" +
            "1 5 0.8853700181950318\n" +
            "1 6 -0.024749239326575204\n" +
            "1 7 -1.0893868148465318\n" +
            "1 8 -0.5000284185082667\n" +
            "1 9 0.4191070856836276\n" +
            "\n" +
            "0.3768920177575942\n" +
            "1 0 0.41998723911768865\n" +
            "1 1 0.5223996931598041\n" +
            "1 2 -0.46697101780371475\n" +
            "1 3 1.1940883242229885\n" +
            "1 4 0.7634919675342386\n" +
            "1 5 0.31529439263333725\n" +
            "1 6 0.4268441008206848\n" +
            "1 7 0.10882524508404967\n" +
            "1 8 -0.9070431824449662\n" +
            "1 9 0.27037370988327153\n" +
            "\n" +
            "-0.44234918408072654\n" +
            "1 0 0.5867937939574243\n" +
            "1 1 -0.5337307159302456\n" +
            "1 2 1.0992465089573558\n" +
            "1 3 1.2549780741104755\n" +
            "1 4 -1.2104427805077635\n" +
            "1 5 0.16349115632683164\n" +
            "1 6 -0.5159252715595768\n" +
            "1 7 0.559334334890176\n" +
            "1 8 -0.6574279719242888\n" +
            "1 9 0.4518162813493847\n" +
            "\n" +
            "0.1202982576935363\n" +
            "1 0 -0.005395068559975569\n" +
            "1 1 -0.7400836861916853\n" +
            "1 2 0.8882667964694855\n" +
            "1 3 0.3904155473045887\n" +
            "1 4 -0.7752993667334485\n" +
            "1 5 0.47217203899322274\n" +
            "1 6 0.05441281301005547\n" +
            "1 7 -0.6990804322406159\n" +
            "1 8 -0.6291726880267055\n" +
            "1 9 0.9401180553411078\n" +
            "\n" +
            "0.03600714734194225\n" +
            "1 0 0.5682724118339435\n" +
            "1 1 0.915172486794837\n" +
            "1 2 0.09952472132241225\n" +
            "1 3 -0.2949835436402824\n" +
            "1 4 -0.7410533035557476\n" +
            "1 5 -0.3067897525090509\n" +
            "1 6 0.46044282948825765\n" +
            "1 7 -0.9539678309088219\n" +
            "1 8 0.2661097439275969\n" +
            "1 9 -0.13082905660156974\n" +
            "\n" +
            "0.9747240825948352\n" +
            "1 0 0.8422625760693396\n" +
            "1 1 -0.07924748833571155\n" +
            "1 2 -0.494456729179496\n" +
            "1 3 1.338367768307908\n" +
            "1 4 0.39324036493087655\n" +
            "1 5 0.7161076180021654\n" +
            "1 6 -0.8901262387327569\n" +
            "1 7 -0.16403748093319587\n" +
            "1 8 -0.18950449559723034\n" +
            "1 9 -0.13739198038447242\n" +
            "\n" +
            "-0.9908569057621175\n" +
            "1 0 -0.27921717347395464\n" +
            "1 1 0.5051117032773612\n" +
            "1 2 0.3509394971590897\n" +
            "1 3 -0.2182813178210743\n" +
            "1 4 -0.33820846826712125\n" +
            "1 5 -0.2434684039336927\n" +
            "1 6 0.580275117239961\n" +
            "1 7 0.2846079388508518\n" +
            "1 8 0.0581961253897695\n" +
            "1 9 0.4294930160712641\n" +
            "\n" +
            "\n" +
            "-0.5908332783647368\n" +
            "2 0 0.3383561410508847\n" +
            "2 1 0.6569892779103015\n" +
            "2 2 -0.09284256908991308\n" +
            "2 3 -0.5659221981953457\n" +
            "2 4 0.6759430689565313\n" +
            "2 5 0.4115548772852498\n" +
            "2 6 0.02237836017213697\n" +
            "2 7 1.0063922462901895\n" +
            "2 8 -0.15642084342222437\n" +
            "2 9 -1.0086060305769937\n" +
            "\n" +
            "-0.45712720578194377\n" +
            "2 0 0.5936544602713014\n" +
            "2 1 0.44336571215015685\n" +
            "2 2 -0.14972662393673095\n" +
            "2 3 0.3270377233892649\n" +
            "2 4 0.21621976663359363\n" +
            "2 5 0.9719346396730878\n" +
            "2 6 -0.7211460338530751\n" +
            "2 7 0.47696654050008225\n" +
            "2 8 -0.9032678224199612\n" +
            "2 9 1.0563764624081409\n" +
            "\n" +
            "0.8615036098383922\n" +
            "2 0 0.6287942930547976\n" +
            "2 1 0.1657275272513032\n" +
            "2 2 -0.9229696097874602\n" +
            "2 3 -0.081154047735347\n" +
            "2 4 -0.11937610118328082\n" +
            "2 5 -1.1023888295283648\n" +
            "2 6 0.12476626355830833\n" +
            "2 7 -0.6249698017414439\n" +
            "2 8 0.9008720058963257\n" +
            "2 9 0.3290052141519028\n" +
            "\n" +
            "1.3705661288966229\n" +
            "2 0 -0.5998121315874461\n" +
            "2 1 0.6488887066736277\n" +
            "2 2 -0.9741038298915365\n" +
            "2 3 0.9546895100143465\n" +
            "2 4 -0.5961907232741442\n" +
            "2 5 0.48933317306038326\n" +
            "2 6 0.4481136268494423\n" +
            "2 7 0.6747259815811013\n" +
            "2 8 -0.29410042274897863\n" +
            "2 9 0.5084539463806254"
        );
        game.initCars();

        function tick() {
            game.update();
            game.draw();
            game.drawNetwork(game.cars[1].controller.network);
        }

        setInterval(tick, 10);
    }

</script>

</body>
</html>